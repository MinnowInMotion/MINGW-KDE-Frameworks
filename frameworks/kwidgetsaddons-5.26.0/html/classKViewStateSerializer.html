<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>KWidgetsAddons - KViewStateSerializer Class Reference</title>

    <style type="text/css">
      .cp-doNotDisplay { display: none; }
      @media aural, braille, handheld, tty { .cp-doNotDisplay { display: inline; speak: normal; }}
      .cp-edit { text-align: right; }
      @media print, embossed { .cp-edit { display: none; }}
    </style>

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <link rel="meta" href="http://www.kde.org/labels.rdf" type="application/rdf+xml" title="ICRA labels" />
    <meta name="trademark" content="KDE e.V." />
    <meta name="description" content="K Desktop Environment Homepage, KDE.org" />
    <meta name="MSSmartTagsPreventParsing" content="true" />
    <meta name="robots" content="all" />
    <meta name="no-email-collection" content="http://www.unspam.com/noemailcollection" />
   
    <script type="text/javascript" src="../../../resources/3rd-party/jquery/jquery-3.1.0.min.js"></script>
    <script type="text/javascript" src="dynsections.js"></script>
    <link rel="shortcut icon" href="../../../resources/favicon.ico" />
    <link rel="icon" href="../../../resources/favicon.ico" />
    <link rel="stylesheet" type="text/css" href="../../../resources/3rd-party/bootstrap/css/bootstrap.min.css" />
  
    <link rel="stylesheet" type="text/css" href="doxygen.css" />
  
    <link rel="stylesheet" type="text/css" href="../../../resources/css/kapidox.css" />


  
</head>

<body>

  <ul class="cp-doNotDisplay">
    <li><a href="#cp-content" accesskey="2">Skip to content</a></li>
    <li><a href="#cp-menu" accesskey="5">Skip to link menu</a></li>
  </ul>

  <nav id="navbar" class="navbar navbar-static-top bg-primary">
    <div class="container">
      <div class="navbar-header">
        <a class="navbar-brand" href="#">
          <img alt="Brand" id="navbar-logo" src="../../../resources/kde-white.svg"/>
        </a>
      </div>
      <p id="navbar-title" class="navbar-text">
        API Documentation 
      </p>
    </div>
  </nav>

  <nav class="navbar">
    <div class="container">
      <ol class="breadcrumb navbar-nav">
      
        <li><a href="../../../index.html">KDE API Reference</a></li>
      
        <li><a href="../../index.html">The KDE Frameworks</a></li>
      
        <li class="active"><a href="index.html">KWidgetsAddons</a></li>
      
      </ol>

        <ul class="nav navbar-nav navbar-right">
          <li><a href="http://www.kde.org/">KDE Home</a></li>
          <li><a href="http://kde.org/contact/">Contact Us</a></li>
        </ul>
      </div>
    </div>
  </nav> <!-- /header -->

  <div id="body_wrapper" class="container">
    <div class="row">
      <div id="left" class="col-md-3">
        
    <div class="menu-box">
  <a name="cp-menu" />
  <div class="menu-title">
    <h2 id="cp-menu-project">Quick Links</h2>
    <a href="#cp-skip-project" class="cp-doNotDisplay">Skip menu "KWidgetsAddons"</a>
  </div>
  <div class="menu-content">
  
    <ul>
    
      <li><a href="index.html">Main Page</a></li>
    
      <li><a href="namespaces.html">Namespace List</a></li>
    
      <li><a href="namespacemembers.html">Namespace Members</a></li>
    
      <li><a href="classes.html">Alphabetical List</a></li>
    
      <li><a href="annotated.html">Class List</a></li>
    
      <li><a href="hierarchy.html">Class Hierarchy</a></li>
    
      <li><a href="files.html">File List</a></li>
    
      <li><a href="pages.html">Related Pages</a></li>
    
    </ul>
  
  </div>
</div>


<div class="menu_box">
  <div class="menu-title">
    <h2>Class Picker</h2>
  </div>
  <div class="menu-content">
    <form name="guideform">
      <select class="form-control" name="guidelinks" style="width:100%;" onChange="window.location=document.guideform.guidelinks.options[document.guideform.guidelinks.selectedIndex].value">
        <option value="annotated.html">-- Choose --</option>
        
        <option value="classKEditListWidget_1_1CustomEditor.html">KEditListWidget::CustomEditor</option>
        
        <option value="classKAcceleratorManager.html">KAcceleratorManager</option>
        
        <option value="classKActionMenu.html">KActionMenu</option>
        
        <option value="classKActionSelector.html">KActionSelector</option>
        
        <option value="classKAnimatedButton.html">KAnimatedButton</option>
        
        <option value="classKAssistantDialog.html">KAssistantDialog</option>
        
        <option value="classKCapacityBar.html">KCapacityBar</option>
        
        <option value="classKCharSelect.html">KCharSelect</option>
        
        <option value="classKCollapsibleGroupBox.html">KCollapsibleGroupBox</option>
        
        <option value="classKColorButton.html">KColorButton</option>
        
        <option value="classKColorCombo.html">KColorCombo</option>
        
        <option value="classKColumnResizer.html">KColumnResizer</option>
        
        <option value="classKCursor.html">KCursor</option>
        
        <option value="classKDatePicker.html">KDatePicker</option>
        
        <option value="classKDragWidgetDecorator.html">KDragWidgetDecorator</option>
        
        <option value="classKDragWidgetDecoratorBase.html">KDragWidgetDecoratorBase</option>
        
        <option value="classKDualAction.html">KDualAction</option>
        
        <option value="classKEditListWidget.html">KEditListWidget</option>
        
        <option value="classKFontAction.html">KFontAction</option>
        
        <option value="classKFontChooser.html">KFontChooser</option>
        
        <option value="classKFontRequester.html">KFontRequester</option>
        
        <option value="classKFontSizeAction.html">KFontSizeAction</option>
        
        <option value="classKGradientSelector.html">KGradientSelector</option>
        
        <option value="classKGuiItem.html">KGuiItem</option>
        
        <option value="classKLed.html">KLed</option>
        
        <option value="classKMessageBoxDontAskAgainInterface.html">KMessageBoxDontAskAgainInterface</option>
        
        <option value="classKMessageBoxNotifyInterface.html">KMessageBoxNotifyInterface</option>
        
        <option value="classKMessageWidget.html">KMessageWidget</option>
        
        <option value="classKMimeTypeChooser.html">KMimeTypeChooser</option>
        
        <option value="classKMimeTypeChooserDialog.html">KMimeTypeChooserDialog</option>
        
        <option value="classKMultiTabBar.html">KMultiTabBar</option>
        
        <option value="classKMultiTabBarButton.html">KMultiTabBarButton</option>
        
        <option value="classKMultiTabBarTab.html">KMultiTabBarTab</option>
        
        <option value="classKNewPasswordDialog.html">KNewPasswordDialog</option>
        
        <option value="classKNewPasswordWidget.html">KNewPasswordWidget</option>
        
        <option value="classKPageDialog.html">KPageDialog</option>
        
        <option value="classKPageModel.html">KPageModel</option>
        
        <option value="classKPageView.html">KPageView</option>
        
        <option value="classKPageWidget.html">KPageWidget</option>
        
        <option value="classKPageWidgetItem.html">KPageWidgetItem</option>
        
        <option value="classKPageWidgetModel.html">KPageWidgetModel</option>
        
        <option value="classKPasswordDialog.html">KPasswordDialog</option>
        
        <option value="classKPixmapRegionSelectorDialog.html">KPixmapRegionSelectorDialog</option>
        
        <option value="classKPixmapRegionSelectorWidget.html">KPixmapRegionSelectorWidget</option>
        
        <option value="classKPixmapSequence.html">KPixmapSequence</option>
        
        <option value="classKPixmapSequenceOverlayPainter.html">KPixmapSequenceOverlayPainter</option>
        
        <option value="classKPixmapSequenceWidget.html">KPixmapSequenceWidget</option>
        
        <option value="classKPopupFrame.html">KPopupFrame</option>
        
        <option value="classKRatingPainter.html">KRatingPainter</option>
        
        <option value="classKRatingWidget.html">KRatingWidget</option>
        
        <option value="classKRuler.html">KRuler</option>
        
        <option value="classKSelectAction.html">KSelectAction</option>
        
        <option value="classKSelector.html">KSelector</option>
        
        <option value="classKSeparator.html">KSeparator</option>
        
        <option value="classKSplitterCollapserButton.html">KSplitterCollapserButton</option>
        
        <option value="classKSqueezedTextLabel.html">KSqueezedTextLabel</option>
        
        <option value="classKTitleWidget.html">KTitleWidget</option>
        
        <option value="classKToggleAction.html">KToggleAction</option>
        
        <option value="classKToggleFullScreenAction.html">KToggleFullScreenAction</option>
        
        <option value="classKToolBarLabelAction.html">KToolBarLabelAction</option>
        
        <option value="classKToolBarPopupAction.html">KToolBarPopupAction</option>
        
        <option value="classKToolBarSpacerAction.html">KToolBarSpacerAction</option>
        
        <option value="classKUrlLabel.html">KUrlLabel</option>
        
        <option value="classKViewStateSerializer.html">KViewStateSerializer</option>
        
        <option value="classKXYSelector.html">KXYSelector</option>
        
        <option value="classLineEditUrlDropEventFilter.html">LineEditUrlDropEventFilter</option>
        
        <option value="namespaceKMessageBox.html">KMessageBox</option>
        
        <option value="namespaceKMimeTypeEditor.html">KMimeTypeEditor</option>
        
        <option value="namespaceKStandardGuiItem.html">KStandardGuiItem</option>
        
      </select>
    </form>
  </div>
</div>



  <div class="menu-box">
  <div class="menu-title">
    <h2>About</h2>
  </div>
  <div class="menu-content">
    <p>Addons to QtWidgets</p>

    <dl>
      <dt>Maintainer</dt>
        <dd>    
      <a href="mailto:cfeck@kde.org">Christoph Feck</a>
    </dd>

  

      <dt>Supported platforms</dt>
        <dd>
      
        
            Android, 
        
      
        
            Linux, 
        
      
        
            MacOSX, 
        
      
        
            Windows
        
      
         </dd>

      <dt>Community</dt>
        <dd>IRC: <a href="irc://freenode/#kde-devel">#kde-devel</a> on Freenode</dd>
        <dd>Mailing list: <a href="https://mail.kde.org/mailman/listinfo/kde-frameworks-devel">kde-frameworks-devel</a></dd>

    
      <dt>Use with <a href="https://techbase.kde.org/Development/Tutorials/CMake">CMake</a></dt>
        <dd><pre class="fragment">find_package(KF5WidgetsAddons)
target_link_libraries(yourapp KF5::WidgetsAddons)</pre>
        </dd>

    
    
      <dt>Use with QMake</dt>
        <dd><pre class="fragment">QT += KWidgetsAddons </pre></dd>
    

      <dt>Clone</dt>
        <dd><pre class="fragment">git clone git://anongit.kde.org/kwidgetsaddons-5.26.0.git</pre></dd>
      <dt>Browse source</dt>
        <dd>KWidgetsAddons on <a href="https://cgit.kde.org/kwidgetsaddons-5.26.0.git/tree">cgit.kde.org</a></dd>
    </dl>
  </div>
</div>




      </div> <!-- /left -->

      <!-- begin main content -->
      <div id="right" class="col-md-9">
        <div class="row-fluid">
          <div class="page-header">

            <form action="search.html" method="get" class="form-inline">
              <div id="search" class="input-group pull-right">
                <input type="text" id="search-input" name="query" aria-label="Search input" class="form-control" placeholder="Search for...">
                <span class="input-group-btn">
                  <button type="submit" class="btn btn-default" aria-label="Search">
                    <span class="glyphicon glyphicon-search"></span>
                  </button>
                </span>
              </div>
            </form>

            <div>
              <h1><a name="content"></a> KWidgetsAddons </h1>
            </div>
          </div>
        </div>
        <div class="row-fluid content">
          <div id="main">
            


<ul class="additional_info">
  <li><a href="http://lxr.kde.org/ident?v=kf5-qt5&amp;_i=KViewStateSerializer">View on LXR</a></li>
</ul>


<div id="top"> <!-- Doxygen will close this div -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="classKViewStateSerializer-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">KViewStateSerializer Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="kviewstateserializer_8h_source.html">kviewstateserializer.h</a>&gt;</code></p>

<p>Inherits QObject.</p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a6f9f4ac069892ab660ec795d278c5aeb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKViewStateSerializer.html#a6f9f4ac069892ab660ec795d278c5aeb">KViewStateSerializer</a> (QObject *parent=0)</td></tr>
<tr class="separator:a6f9f4ac069892ab660ec795d278c5aeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6cf50fd839b0eff539b363b9243b9c1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKViewStateSerializer.html#ae6cf50fd839b0eff539b363b9243b9c1">~KViewStateSerializer</a> ()</td></tr>
<tr class="separator:ae6cf50fd839b0eff539b363b9243b9c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c53de68388227382abd65527c3ce08b"><td class="memItemLeft" align="right" valign="top">QString&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKViewStateSerializer.html#a3c53de68388227382abd65527c3ce08b">currentIndexKey</a> () const</td></tr>
<tr class="separator:a3c53de68388227382abd65527c3ce08b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6dd82273a35304fd6ee5e01798548d8e"><td class="memItemLeft" align="right" valign="top">QStringList&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKViewStateSerializer.html#a6dd82273a35304fd6ee5e01798548d8e">expansionKeys</a> () const</td></tr>
<tr class="separator:a6dd82273a35304fd6ee5e01798548d8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44fd69f3243940702caee7a57028ddc6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKViewStateSerializer.html#a44fd69f3243940702caee7a57028ddc6">restoreCurrentItem</a> (const QString &amp;indexString)</td></tr>
<tr class="separator:a44fd69f3243940702caee7a57028ddc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a671a78a1e95f76f63a507ab0b03c6a1e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKViewStateSerializer.html#a671a78a1e95f76f63a507ab0b03c6a1e">restoreExpanded</a> (const QStringList &amp;indexStrings)</td></tr>
<tr class="separator:a671a78a1e95f76f63a507ab0b03c6a1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d43c82443ab7c0f42e2992459f02257"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKViewStateSerializer.html#a6d43c82443ab7c0f42e2992459f02257">restoreScrollState</a> (int verticalScoll, int horizontalScroll)</td></tr>
<tr class="separator:a6d43c82443ab7c0f42e2992459f02257"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3784bc10c0e548469525d2abd56f396d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKViewStateSerializer.html#a3784bc10c0e548469525d2abd56f396d">restoreSelection</a> (const QStringList &amp;indexStrings)</td></tr>
<tr class="separator:a3784bc10c0e548469525d2abd56f396d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18b832387ed36c490c823d9a484f56eb"><td class="memItemLeft" align="right" valign="top">QPair&lt; int, int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKViewStateSerializer.html#a18b832387ed36c490c823d9a484f56eb">scrollState</a> () const</td></tr>
<tr class="separator:a18b832387ed36c490c823d9a484f56eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08f097e505cf55dd175fcef03e8cd0d5"><td class="memItemLeft" align="right" valign="top">QStringList&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKViewStateSerializer.html#a08f097e505cf55dd175fcef03e8cd0d5">selectionKeys</a> () const</td></tr>
<tr class="separator:a08f097e505cf55dd175fcef03e8cd0d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90e94491b2bacb941410d62bf3c8a922"><td class="memItemLeft" align="right" valign="top">QItemSelectionModel *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKViewStateSerializer.html#a90e94491b2bacb941410d62bf3c8a922">selectionModel</a> () const</td></tr>
<tr class="separator:a90e94491b2bacb941410d62bf3c8a922"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1eebff117ca55f79ff155ecb46f7bb1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKViewStateSerializer.html#ad1eebff117ca55f79ff155ecb46f7bb1">setSelectionModel</a> (QItemSelectionModel *<a class="el" href="classKViewStateSerializer.html#a90e94491b2bacb941410d62bf3c8a922">selectionModel</a>)</td></tr>
<tr class="separator:ad1eebff117ca55f79ff155ecb46f7bb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9491f9a0a3cfdf96304638f58e69759"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKViewStateSerializer.html#ad9491f9a0a3cfdf96304638f58e69759">setView</a> (QAbstractItemView *<a class="el" href="classKViewStateSerializer.html#a74819548ac7056638f109f26e2c7690e">view</a>)</td></tr>
<tr class="separator:ad9491f9a0a3cfdf96304638f58e69759"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74819548ac7056638f109f26e2c7690e"><td class="memItemLeft" align="right" valign="top">QAbstractItemView *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKViewStateSerializer.html#a74819548ac7056638f109f26e2c7690e">view</a> () const</td></tr>
<tr class="separator:a74819548ac7056638f109f26e2c7690e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:aba4701263537d6d2bb1f3ac6ce10959d"><td class="memItemLeft" align="right" valign="top">virtual QModelIndex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKViewStateSerializer.html#aba4701263537d6d2bb1f3ac6ce10959d">indexFromConfigString</a> (const QAbstractItemModel *model, const QString &amp;key) const =0</td></tr>
<tr class="separator:aba4701263537d6d2bb1f3ac6ce10959d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3762dcd4e201df6dc96d3486854840c2"><td class="memItemLeft" align="right" valign="top">virtual QString&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKViewStateSerializer.html#a3762dcd4e201df6dc96d3486854840c2">indexToConfigString</a> (const QModelIndex &amp;index) const =0</td></tr>
<tr class="separator:a3762dcd4e201df6dc96d3486854840c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2da1fc06db37ec626649c05ed9e2508"><td class="memItemLeft" align="right" valign="top"><a id="ae2da1fc06db37ec626649c05ed9e2508"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>restoreState</b> ()</td></tr>
<tr class="separator:ae2da1fc06db37ec626649c05ed9e2508"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Object for saving and restoring state in QTreeViews and QItemSelectionModels. </p>
<p>Implement the indexFromConfigString and indexToConfigString methods to handle the model in the view whose state is being saved. These implementations can be quite trivial:</p>
<div class="fragment"><div class="line">QModelIndex DynamicTreeStateSaver::indexFromConfigString(<span class="keyword">const</span> QAbstractItemModel* model, <span class="keyword">const</span> QString&amp; key)<span class="keyword"> const</span></div><div class="line"><span class="keyword"></span>{</div><div class="line">  QModelIndexList list = model-&gt;match(model-&gt;index(0, 0), DynamicTreeModel::DynamicTreeModelId, key.toInt(), 1, Qt::MatchRecursive);</div><div class="line">  <span class="keywordflow">if</span> (list.isEmpty())</div><div class="line">    <span class="keywordflow">return</span> QModelIndex();</div><div class="line">  <span class="keywordflow">return</span> list.first();</div><div class="line">}</div><div class="line"></div><div class="line">QString DynamicTreeStateSaver::indexToConfigString(<span class="keyword">const</span> QModelIndex&amp; index)<span class="keyword"> const</span></div><div class="line"><span class="keyword"></span>{</div><div class="line">  <span class="keywordflow">return</span> index.data(DynamicTreeModel::DynamicTreeModelId).toString();</div><div class="line">}</div></div><!-- fragment --><p>It is possible to restore the state of a QTreeView (that is, the expanded state and selected state of all indexes as well as the horizontal and vertical scroll state) by using setTreeView.</p>
<p>If there is no tree view state to restore (for example if using QML), the selection state of a QItemSelectionModel can be saved or restored instead.</p>
<p>The state of any QAbstractScrollArea can also be saved and restored.</p>
<p>A <a class="el" href="classKViewStateSerializer.html" title="Object for saving and restoring state in QTreeViews and QItemSelectionModels. ">KViewStateSerializer</a> should be created on the stack when saving and on the heap when restoring. The model may be populated dynamically between several event loops, so it may not be immediate for the indexes that should be selected to be in the model. The saver should <em>not</em> be persisted as a member. The saver will destroy itself when it has completed the restoration specified in the config group, or a small amount of time has elapsed.</p>
<div class="fragment"><div class="line">MyWidget::MyWidget(Qobject *parent)</div><div class="line">  : QWidget(parent)</div><div class="line">{</div><div class="line">  ...</div><div class="line"></div><div class="line">  m_view = <span class="keyword">new</span> QTreeView(splitter);</div><div class="line">  m_view-&gt;setModel(model);</div><div class="line"></div><div class="line">  connect( model, SIGNAL(modelAboutToBeReset()), SLOT(saveState()) );</div><div class="line">  connect( model, SIGNAL(modelReset()), SLOT(restoreState()) );</div><div class="line">  connect( qApp, SIGNAL(aboutToQuit()), SLOT(saveState()) );</div><div class="line"></div><div class="line">  restoreState();</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> StateSaverWidget::saveState()</div><div class="line">{</div><div class="line">  ConcreteStateSaver saver;</div><div class="line">  saver.setTreeView(m_view);</div><div class="line"></div><div class="line">  <a class="codeRef" doxygen="D:/Users/anthony/Documents/MINGW-KDE-Frameworks/frameworks/kconfig-5.26.0/html/KConfig.tags:../../../frameworks/kconfig-5.26.0/html/" href="../../../frameworks/kconfig-5.26.0/html/classKConfigGroup.html">KConfigGroup</a> cfg( <a class="codeRef" doxygen="D:/Users/anthony/Documents/MINGW-KDE-Frameworks/frameworks/kconfig-5.26.0/html/KConfig.tags:../../../frameworks/kconfig-5.26.0/html/" href="../../../frameworks/kconfig-5.26.0/html/classKSharedConfig.html#a328208649f2e3f0ee895c9b11aa82205">KSharedConfig::openConfig</a>(), <span class="stringliteral">&quot;ExampleViewState&quot;</span> );</div><div class="line">  saver.saveState( cfg );</div><div class="line">  cfg.sync();</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> StateSaverWidget::restoreState()</div><div class="line">{</div><div class="line">  <span class="comment">// Will delete itself.</span></div><div class="line">  ConcreteTreeStateSaver *saver = <span class="keyword">new</span> ConcreteStateSaver();</div><div class="line">  saver-&gt;setTreeView(m_view);</div><div class="line">  <a class="codeRef" doxygen="D:/Users/anthony/Documents/MINGW-KDE-Frameworks/frameworks/kconfig-5.26.0/html/KConfig.tags:../../../frameworks/kconfig-5.26.0/html/" href="../../../frameworks/kconfig-5.26.0/html/classKConfigGroup.html">KConfigGroup</a> cfg( <a class="codeRef" doxygen="D:/Users/anthony/Documents/MINGW-KDE-Frameworks/frameworks/kconfig-5.26.0/html/KConfig.tags:../../../frameworks/kconfig-5.26.0/html/" href="../../../frameworks/kconfig-5.26.0/html/classKSharedConfig.html#a328208649f2e3f0ee895c9b11aa82205">KSharedConfig::openConfig</a>(), <span class="stringliteral">&quot;ExampleViewState&quot;</span> );</div><div class="line">  saver-&gt;restoreState( cfg );</div><div class="line">}</div></div><!-- fragment --><p>After creating a saver, the state can be saved using a <a class="elRef" doxygen="D:/Users/anthony/Documents/MINGW-KDE-Frameworks/frameworks/kconfig-5.26.0/html/KConfig.tags:../../../frameworks/kconfig-5.26.0/html/" href="../../../frameworks/kconfig-5.26.0/html/classKConfigGroup.html">KConfigGroup</a>.</p>
<p>It is also possible to save and restore state directly by using the restoreSelection, restoreExpanded etc methods. Note that the implementation of these methods should return strings that the indexFromConfigString implementation can handle.</p>
<div class="fragment"><div class="line"><span class="keyword">class </span>DynamicTreeStateSaver : <span class="keyword">public</span> <a class="code" href="classKViewStateSerializer.html">KViewStateSerializer</a></div><div class="line">{</div><div class="line">  Q_OBJECT</div><div class="line"><span class="keyword">public</span>:</div><div class="line">  <span class="comment">// ...</span></div><div class="line"></div><div class="line">  <span class="keywordtype">void</span> selectItems(<span class="keyword">const</span> QList&lt;qint64&gt; &amp;items)</div><div class="line">  {</div><div class="line">    QStringList itemStrings;</div><div class="line">    Q_FOREACH(qint64 item, items)</div><div class="line">      itemStrings &lt;&lt; QString::number(item);</div><div class="line">    <a class="code" href="classKViewStateSerializer.html#a3784bc10c0e548469525d2abd56f396d">restoreSelection</a>(itemStrings);</div><div class="line">  }</div><div class="line"></div><div class="line">  <span class="keywordtype">void</span> expandItems(<span class="keyword">const</span> QList&lt;qint64&gt; &amp;items)</div><div class="line">  {</div><div class="line">    QStringList itemStrings;</div><div class="line">    Q_FOREACH(qint64 item, items)</div><div class="line">      itemStrings &lt;&lt; QString::number(item);</div><div class="line">    <a class="code" href="classKViewStateSerializer.html#a3784bc10c0e548469525d2abd56f396d">restoreSelection</a>(itemStrings);</div><div class="line">  }</div><div class="line"></div><div class="line">};</div></div><!-- fragment --><p>Note that a single instance of this class should be used with only one widget. That is don't do this:</p>
<div class="fragment"><div class="line">saver-&gt;setTreeView(treeView1);</div><div class="line">saver-&gt;setSelectionModel(treeView2-&gt;selectionModel());</div><div class="line">saver-&gt;setScrollArea(treeView3);</div></div><!-- fragment --><p>To save the state of 3 different widgets, use three savers, even if they operate on the same root model.</p>
<div class="fragment"><div class="line">saver1-&gt;setTreeView(treeView1);</div><div class="line">saver2-&gt;setSelectionModel(treeView2-&gt;selectionModel());</div><div class="line">saver3-&gt;setScrollArea(treeView3);</div></div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>The <a class="el" href="classKViewStateSerializer.html" title="Object for saving and restoring state in QTreeViews and QItemSelectionModels. ">KViewStateSerializer</a> does not take ownership of any widgets set on it.</dd></dl>
<p>It is recommended to restore the state on application startup and after the model has been reset, and to save the state on application close and before the model has been reset.</p>
<dl class="section see"><dt>See also</dt><dd>QAbstractItemModel::modelAboutToBeReset QAbstractItemModel::modelReset</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Stephen Kelly <a href="#" onclick="location.href='mai'+'lto:'+'ste'+'ph'+'en@'+'kd'+'ab.'+'co'+'m'; return false;">steph<span style="display: none;">.nosp@m.</span>en@k<span style="display: none;">.nosp@m.</span>dab.c<span style="display: none;">.nosp@m.</span>om</a> </dd></dl>
<dl class="section since"><dt>Since</dt><dd>4.5 </dd></dl>

<p class="definition">Definition at line <a class="el" href="kviewstateserializer_8h_source.html#l00166">166</a> of file <a class="el" href="kviewstateserializer_8h_source.html">kviewstateserializer.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a6f9f4ac069892ab660ec795d278c5aeb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f9f4ac069892ab660ec795d278c5aeb">&#9670;&nbsp;</a></span>KViewStateSerializer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">KViewStateSerializer::KViewStateSerializer </td>
          <td>(</td>
          <td class="paramtype">QObject *&#160;</td>
          <td class="paramname"><em>parent</em> = <code>0</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructor. </p>

<p class="definition">Definition at line <a class="el" href="kviewstateserializer_8cpp_source.html#l00107">107</a> of file <a class="el" href="kviewstateserializer_8cpp_source.html">kviewstateserializer.cpp</a>.</p>

</div>
</div>
<a id="ae6cf50fd839b0eff539b363b9243b9c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6cf50fd839b0eff539b363b9243b9c1">&#9670;&nbsp;</a></span>~KViewStateSerializer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">KViewStateSerializer::~KViewStateSerializer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destructor. </p>

<p class="definition">Definition at line <a class="el" href="kviewstateserializer_8cpp_source.html#l00114">114</a> of file <a class="el" href="kviewstateserializer_8cpp_source.html">kviewstateserializer.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a3c53de68388227382abd65527c3ce08b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c53de68388227382abd65527c3ce08b">&#9670;&nbsp;</a></span>currentIndexKey()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QString KViewStateSerializer::currentIndexKey </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a QString describing the current index in the selection model. </p>

<p class="definition">Definition at line <a class="el" href="kviewstateserializer_8cpp_source.html#l00316">316</a> of file <a class="el" href="kviewstateserializer_8cpp_source.html">kviewstateserializer.cpp</a>.</p>

</div>
</div>
<a id="a6dd82273a35304fd6ee5e01798548d8e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6dd82273a35304fd6ee5e01798548d8e">&#9670;&nbsp;</a></span>expansionKeys()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QStringList KViewStateSerializer::expansionKeys </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a QStringList representing the expanded indexes in the QTreeView. </p>

<p class="definition">Definition at line <a class="el" href="kviewstateserializer_8cpp_source.html#l00325">325</a> of file <a class="el" href="kviewstateserializer_8cpp_source.html">kviewstateserializer.cpp</a>.</p>

</div>
</div>
<a id="aba4701263537d6d2bb1f3ac6ce10959d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba4701263537d6d2bb1f3ac6ce10959d">&#9670;&nbsp;</a></span>indexFromConfigString()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual QModelIndex KViewStateSerializer::indexFromConfigString </td>
          <td>(</td>
          <td class="paramtype">const QAbstractItemModel *&#160;</td>
          <td class="paramname"><em>model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplement to return an index in the <code>model</code> described by the unique key <code>key</code>. </p>

</div>
</div>
<a id="a3762dcd4e201df6dc96d3486854840c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3762dcd4e201df6dc96d3486854840c2">&#9670;&nbsp;</a></span>indexToConfigString()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual QString KViewStateSerializer::indexToConfigString </td>
          <td>(</td>
          <td class="paramtype">const QModelIndex &amp;&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplement to return a unique string for the <code>index</code>. </p>

</div>
</div>
<a id="a44fd69f3243940702caee7a57028ddc6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44fd69f3243940702caee7a57028ddc6">&#9670;&nbsp;</a></span>restoreCurrentItem()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void KViewStateSerializer::restoreCurrentItem </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>indexString</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Make the index described by <code>indexString</code> the currentIndex in the selectionModel. </p>

<p class="definition">Definition at line <a class="el" href="kviewstateserializer_8cpp_source.html#l00215">215</a> of file <a class="el" href="kviewstateserializer_8cpp_source.html">kviewstateserializer.cpp</a>.</p>

</div>
</div>
<a id="a671a78a1e95f76f63a507ab0b03c6a1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a671a78a1e95f76f63a507ab0b03c6a1e">&#9670;&nbsp;</a></span>restoreExpanded()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void KViewStateSerializer::restoreExpanded </td>
          <td>(</td>
          <td class="paramtype">const QStringList &amp;&#160;</td>
          <td class="paramname"><em>indexStrings</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Expand the indexes described by <code>indexStrings</code> in the QTreeView. </p>

<p class="definition">Definition at line <a class="el" href="kviewstateserializer_8cpp_source.html#l00249">249</a> of file <a class="el" href="kviewstateserializer_8cpp_source.html">kviewstateserializer.cpp</a>.</p>

</div>
</div>
<a id="a6d43c82443ab7c0f42e2992459f02257"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d43c82443ab7c0f42e2992459f02257">&#9670;&nbsp;</a></span>restoreScrollState()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void KViewStateSerializer::restoreScrollState </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>verticalScoll</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>horizontalScroll</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Restores the scroll state of the QAbstractScrollArea to the <code>verticalScoll</code> and <code>horizontalScroll</code>. </p>

<p class="definition">Definition at line <a class="el" href="kviewstateserializer_8cpp_source.html#l00267">267</a> of file <a class="el" href="kviewstateserializer_8cpp_source.html">kviewstateserializer.cpp</a>.</p>

</div>
</div>
<a id="a3784bc10c0e548469525d2abd56f396d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3784bc10c0e548469525d2abd56f396d">&#9670;&nbsp;</a></span>restoreSelection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void KViewStateSerializer::restoreSelection </td>
          <td>(</td>
          <td class="paramtype">const QStringList &amp;&#160;</td>
          <td class="paramname"><em>indexStrings</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Select the indexes described by <code>indexStrings</code>. </p>

<p class="definition">Definition at line <a class="el" href="kviewstateserializer_8cpp_source.html#l00297">297</a> of file <a class="el" href="kviewstateserializer_8cpp_source.html">kviewstateserializer.cpp</a>.</p>

</div>
</div>
<a id="a18b832387ed36c490c823d9a484f56eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18b832387ed36c490c823d9a484f56eb">&#9670;&nbsp;</a></span>scrollState()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QPair&lt; int, int &gt; KViewStateSerializer::scrollState </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the vertical and horizontal scroll of the QAbstractScrollArea. </p>

<p class="definition">Definition at line <a class="el" href="kviewstateserializer_8cpp_source.html#l00351">351</a> of file <a class="el" href="kviewstateserializer_8cpp_source.html">kviewstateserializer.cpp</a>.</p>

</div>
</div>
<a id="a08f097e505cf55dd175fcef03e8cd0d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08f097e505cf55dd175fcef03e8cd0d5">&#9670;&nbsp;</a></span>selectionKeys()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QStringList KViewStateSerializer::selectionKeys </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a QStringList describing the selection in the selectionModel. </p>

<p class="definition">Definition at line <a class="el" href="kviewstateserializer_8cpp_source.html#l00335">335</a> of file <a class="el" href="kviewstateserializer_8cpp_source.html">kviewstateserializer.cpp</a>.</p>

</div>
</div>
<a id="a90e94491b2bacb941410d62bf3c8a922"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90e94491b2bacb941410d62bf3c8a922">&#9670;&nbsp;</a></span>selectionModel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QItemSelectionModel * KViewStateSerializer::selectionModel </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The QItemSelectionModel whose state is persisted. </p>

<p class="definition">Definition at line <a class="el" href="kviewstateserializer_8cpp_source.html#l00139">139</a> of file <a class="el" href="kviewstateserializer_8cpp_source.html">kviewstateserializer.cpp</a>.</p>

</div>
</div>
<a id="ad1eebff117ca55f79ff155ecb46f7bb1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1eebff117ca55f79ff155ecb46f7bb1">&#9670;&nbsp;</a></span>setSelectionModel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void KViewStateSerializer::setSelectionModel </td>
          <td>(</td>
          <td class="paramtype">QItemSelectionModel *&#160;</td>
          <td class="paramname"><em>selectionModel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the QItemSelectionModel whose state is persisted. </p>

<p class="definition">Definition at line <a class="el" href="kviewstateserializer_8cpp_source.html#l00145">145</a> of file <a class="el" href="kviewstateserializer_8cpp_source.html">kviewstateserializer.cpp</a>.</p>

</div>
</div>
<a id="ad9491f9a0a3cfdf96304638f58e69759"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9491f9a0a3cfdf96304638f58e69759">&#9670;&nbsp;</a></span>setView()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void KViewStateSerializer::setView </td>
          <td>(</td>
          <td class="paramtype">QAbstractItemView *&#160;</td>
          <td class="paramname"><em>view</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the view whose state is persisted. </p>

<p class="definition">Definition at line <a class="el" href="kviewstateserializer_8cpp_source.html#l00119">119</a> of file <a class="el" href="kviewstateserializer_8cpp_source.html">kviewstateserializer.cpp</a>.</p>

</div>
</div>
<a id="a74819548ac7056638f109f26e2c7690e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74819548ac7056638f109f26e2c7690e">&#9670;&nbsp;</a></span>view()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QAbstractItemView * KViewStateSerializer::view </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The view whose state is persisted. </p>

<p class="definition">Definition at line <a class="el" href="kviewstateserializer_8cpp_source.html#l00133">133</a> of file <a class="el" href="kviewstateserializer_8cpp_source.html">kviewstateserializer.cpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="kviewstateserializer_8h_source.html">kviewstateserializer.h</a></li>
<li><a class="el" href="kviewstateserializer_8cpp_source.html">kviewstateserializer.cpp</a></li>
</ul>
</div><!-- contents -->

<div class="copyrights">
  This file is part of the KDE documentation.<br/>
  Documentation copyright &copy; 1996-2017 The KDE developers.<br/>
  Generated on Wed Aug 16 2017 09:26:25 by
  <a href="http://www.doxygen.org/">doxygen</a> 1.8.13 written
  by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>, &copy;&nbsp;1997-2006
  <p>
  KDE's <a href="http://community.kde.org/Policies/Library_Documentation_Policy">Doxygen guidelines</a> are available online.
  </p>
</div>


          </div>
        </div>
      </div> <!-- /right -->
    </div> <!-- /body -->
  </div> <!-- /body_wrapper -->

  <footer class="footer bg-primary">
    <div id="footer-text" class="center-block col-md-7" style="float:none;">
        <p>Report problems with this website to <a href="https://go.kde.org/u/systickets">our bug tracking system</a>.<br />
Contact the specific authors with questions and comments about the page contents.<p>
<p>KDE<sup>&#174;</sup> and <a href="/media/images/kde_gear_black.png">the K Desktop Environment<sup>&#174;</sup> logo</a> are registered trademarks of <a href="http://ev.kde.org/" title="Homepage of the KDE non-profit Organization">KDE e.V.</a> | <a href="http://www.kde.org/contact/impressum.php">Legal</a></p>
    </div>
    
  </footer>

<!--
WARNING: DO NOT SEND MAIL TO THE FOLLOWING EMAIL ADDRESS! YOU WILL
BE BLOCKED INSTANTLY AND PERMANENTLY!
<a href="mailto:aaaatrap-45abe0e0c3bebc77@kde.org">Block me</a>
WARNING END
-->

</body>
</html>